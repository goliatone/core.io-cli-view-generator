<!--
Autogenerated file: {{label}}
{{now|date('Y-m-d h:m:s')}}
-->
<%- include('_grid_controls.ejs') %>

<div id="form-content" class="content-table">
    <table id="{{identity}}_grid" class="table table-striped table-bordered table-hover table-condensed" cellspacing="0" width="100%">
        <thead>
            <tr>{% for field in fields %}
                {% if !field.hideGrid -%}
                <th class="js-filter-sort" data-filter="{{field.name}}" data-dir="ASC"><span>{{field.label}}</span>
                    <button class="btn btn-icon active"><span class="glyphicon glyphicon-sort-by-attributes"></span></button>
                </th>{% endif -%}{% endfor %}
            </tr>
        </thead>
        <tfoot>
            <tr>{% for field in fields %}
                {% if !field.hideGrid %}
                <th class="js-filter-sort" data-filter="{{field.name}}" data-dir="ASC"><span>{{field.label}}</span>
                    <button class="btn btn-icon active"><span class="glyphicon glyphicon-sort-by-attributes"></span></button>
                </th>{% endif -%}{% endfor %}
            </tr>
        </tfoot>

        <tbody>
        <%
            locals.records && locals.records.forEach((item)=>{ %>
                <tr>
                {%- for field in fields %}
                    {% if !field.hideGrid -%}
                    <td>
                    {%- if field.primaryKey %}
                        {% set pk = field.name %}
                        <a href="<%= urlFor('GET', '{{identity}}', item.id); %>">
                            <%= item.{{field.name}} %>
                        </a>
                    {%- elif field.relType === 'one-to-many'%}
                        <% if(item.{{field.name}}){ %>
                            <a class="{{field.name}}" href="<%= urlFor('GET', '{{field.uri}}', item.{{field.name}}.id); %>">
                                <%= item.{{field.name}}.name || item.{{field.name}}.id %>
                            </a>
                        <% } else { %>
                            ---
                        <%}%>
                    {%- elif field.entityType === 'array'%}
                        <%= item.{{field.name}}.length %> {{field.name}}
                    {%- else %}
                        <%= item.{{field.name}} %>
                    {% endif %}
                    </td>
                    {% endif -%}
                {%- endfor %}
                </tr>
        <% }) %>
        </tbody>
    </table>
</div>

<!-- pagination-->
<%- include('_grid_footer.ejs') %>
